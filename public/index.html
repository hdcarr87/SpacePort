<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta content="ie=edge" http-equiv="X-UA-Compatible">
        <title>Document</title>

        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Press+Start+2P&display=swap" rel="stylesheet">
        <nav>
            <div class="nav-wrapper deep-purple lighten-0">
                <a class="brand-logo" href="#!">
                    <i class="fas fa-user-astronaut"></i>
                </a>
                <ul class="right hide-on-med-and-down"></ul>
            </div>
        </nav>

        <style>

            .nasa {
                background-color: #EEE;
                padding:30px;
            }

            body {
                display: flex;
                min-height: 100vh;
                flex-direction: column;
                background-image: url('https://i.pinimg.com/originals/83/ca/d5/83cad58240e7e877efee1503965a05fe.gif');
                font-family: 'Press Start 2P', cursive;
              }
              .white-text {
                text-align:center;
              }
          
              main {
                flex: 1 0 auto;
            }

            .input-field input[type=date]:focus + label,
            .input-field input[type=text]:focus + label,
            .input-field input[type=email]:focus + label,
            .input-field input[type=password]:focus + label {
                color: #e91e63;
            }

            .input-field input[type=date]:focus,
            .input-field input[type=text]:focus,
            .input-field input[type=email]:focus,
            .input-field input[type=password]:focus {
                border-bottom: 2px solid #e91e63;
                box-shadow: none;
            }
            nav {
                background-color: #673ab7;
              }
        </style>
    </head>

    <body>
        <div class="section"></div>
        <main>
            <center>
                <h5 class="white-text">Space Port</h5>
                <div class="section"></div>

                <h6 class="white-text">Please, login into your account</h5>
                <div class="section"></div>

                <div class="container">
                    <div class="z-depth-1 grey lighten-4 row" style="display: inline-block; padding: 32px 48px 0px 48px; border: 1px solid #EEE;">

                        <form class="col s12">
                            <div class='row'>
                                <div class='col s12'></div>
                            </div>

                            <div class='row'>
                                <div class='input-field col s12'>
                                    <input class='validate' id='email' name='email' type='email'/>
                                    <label for='email'>Enter your email</label>
                                </div>
                            </div>

                            <div class='row'>
                                <div class='input-field col s12'>
                                    <input class='validate' id='password' name='password' type='password'/>
                                    <label for='password'>Enter your password</label>
                                </div>
                                <label style='float: right;'>
                                    <a class='pink-text' href='#!'>
                                        <b>Forgot Password?</b>
                                    </a>
                                </label>
                            </div>

                            <br/>
                            <center>
                                <div class='row'>
                                    <button id="login" class='col s12 btn btn-large waves-effect deep-purple lighten-0' name='btn_login'>Login</button>
                                </div>
                            </center>
                        </form>
                    </div>
                </div>
                <a href="#!">Create account</a>

                <div class="nasa">
                    <div id="nasa">
                        NASA PICTURE AND FACT OF THE DAY!
                        powered by api.nasa.gov
                    </div>
                </div>
            </center>

            <div class="section"></div>
            <div class="section"></div>
        </main>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.min.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js" type="text/javascript"></script>
        <script crossorigin="anonymous" src="https://kit.fontawesome.com/8ce1e63b1f.js"></script>
        <script src="js/index.js"></script>
        
        <script>
          var user = JSON.parse(localStorage.getItem("user"))
          console.log(user)
          if (user && user.email !==""){
            $("#email").val(user.email)
            $("#password").val(user.pass)
          }
          $("#login").on("click", function(){
            event.preventDefault()
          
            console.log("click")
            user = {
              email : $("#email").val(),
              password : $("#password").val()
            }
            console.log(user)
            localStorage.setItem("user", JSON.stringify(user) )
            
             $.post("/api/email", user, function(data){
                console.log(data)
                window.location = "/home"
            })
            

          })

        </script>

</body>
</html>


